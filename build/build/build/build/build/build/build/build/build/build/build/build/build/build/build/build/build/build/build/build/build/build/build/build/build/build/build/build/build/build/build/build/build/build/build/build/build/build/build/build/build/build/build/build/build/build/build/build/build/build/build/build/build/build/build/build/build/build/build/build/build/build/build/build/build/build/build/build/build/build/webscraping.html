<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="State of the R" />

<meta name="date" content="2022-08-22" />

<title>Extraction automatique de contenu web</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Finist'R 2022</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="https://github.com/StateOfTheR/finistR2022">
    <span class="fa fa-github"></span>
     
    
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Workflow
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="introDockeR.html">Docker</a>
    </li>
    <li>
      <a href="rebase.html">Git avancé</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-brands fa-r-project"></span>
     
    Langage R et shiny
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="pipe.html">Pipes</a>
    </li>
    <li>
      <a href="webscraping.html">Webscrapping</a>
    </li>
    <li>
      <a href="extensionShiny.html">Shiny extension</a>
    </li>
  </ul>
</li>
<li>
  <a href="sig_with_sf.html">
    <span class="fa fa-solid fa-earth-africa"></span>
     
    SIG with R
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Extraction automatique de contenu web</h1>
<h4 class="author">State of the R</h4>
<h4 class="date">2022-08-22</h4>

</div>


<div id="préambule" class="section level1">
<h1>Préambule</h1>
<p>L’objectif de ce tutoriel est de créer une liste des outils
(essentiellement packages R) développés par un groupe de personnes à
partir de leurs adresses email ou identifiants en récupérant les
informations automatiquement par requêtage web.</p>
<div id="web-scraping-et-text-mining" class="section level2">
<h2>Web scraping et text mining</h2>
<div id="lextraction-automatique-de-contenu-web-ou-web-scraping"
class="section level3">
<h3>L’extraction automatique de contenu web ou web scraping</h3>
<p><em>Le web scraping (parfois appelé harvesting) est une technique
d’extraction du contenu de sites Web, via un script ou un programme,
dans le but de le transformer pour permettre son utilisation dans un
autre contexte.</em> (source : <a
href="https://fr.wikipedia.org/wiki/Web_scraping"
class="uri">https://fr.wikipedia.org/wiki/Web_scraping</a>)</p>
<p>Le package <code>{{httr}}</code> permet de travailler avec des URLs
et HTTP (<a href="https://httr.r-lib.org/"
class="uri">https://httr.r-lib.org/</a>). Il permet d’écrire des
requêtes web avec la fonction <code>GET()</code> et retourne un objet
json à inspecter et retravailler. Il peut être utiliser en lien avec le
package <code>{{curl}}</code> (<a href="https://jeroen.cran.dev/curl/"
class="uri">https://jeroen.cran.dev/curl/</a>) et
<code>{{jsonlite}}</code> (<a
href="https://cran.r-project.org/web/packages/jsonlite/"
class="uri">https://cran.r-project.org/web/packages/jsonlite/</a>). Ce
dernier est utile pour manipuler les objets liste json souvent
complexes.</p>
</div>
<div id="fouille-de-texte-ou-text-mining" class="section level3">
<h3>Fouille de texte ou text mining</h3>
<p>Le text mining consiste à structurer du texte pour en sortir du
contenu. Des techniques sont implémentées sous R dans le package
<code>{{tidytext}}</code>.</p>
<p><a href="https://www.tidytextmining.com/tidytext.html"
class="uri">https://www.tidytextmining.com/tidytext.html</a></p>
</div>
</div>
</div>
<div id="récupération-de-packages-par-web-scraping"
class="section level1">
<h1>Récupération de packages par web scraping</h1>
<p>Notre objectif est d’établir une liste de packages R développés par
un groupe de personnes défini à partir de dépôts R ou git.</p>
<div id="dépots-r-cran-et-bioconductor" class="section level2">
<h2>Dépots R (CRAN et Bioconductor)</h2>
<p>Pour les packages Bioconductor, on utilisera le package
<code>{{BiocPkgTools}}</code> et pour ceux du CRAN la fonction
<code>tools::CRAN_package_db()</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>emails_int <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;andrea.rau@inrae.fr&quot;</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;nathalie.vialaneix@inrae.fr&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># browse CRAN</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>cran_db <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">CRAN_package_db</span>()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>cran_int <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span> (emails_int, <span class="cf">function</span>(x) <span class="fu">grep</span>(x, cran_db<span class="sc">$</span><span class="st">`</span><span class="at">Authors@R</span><span class="st">`</span>))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>pkgs_cran <span class="ot">&lt;-</span> cran_db[<span class="fu">unique</span>(<span class="fu">unlist</span>(cran_int)),]</span></code></pre></div>
<p>On peut ainsi récupérer la liste des packages et les métadonnées
associées des auteurs pour lesquels nous avons mentionné le courriel,
quelque soit leur rôle.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>bpi <span class="ot">&lt;-</span> BiocPkgTools<span class="sc">::</span><span class="fu">biocPkgList</span>()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>bpi_int <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span> (emails_int, <span class="cf">function</span>(x) <span class="fu">grep</span>(x, bpi<span class="sc">$</span><span class="st">`</span><span class="at">Maintainer</span><span class="st">`</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>pkgs_bioc <span class="ot">&lt;-</span> bpi[<span class="fu">unique</span>(<span class="fu">unlist</span>(bpi_int)),]</span></code></pre></div>
<p>Pour Bioconductor, on ne peut récupérer que les packages pour
lesquels l’adresse email du mainteneur fait partie de la liste d’emails
recherchées.</p>
<p>Autres dépôts :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>repos <span class="ot">=</span> <span class="st">&quot;http://www.omegahat.net/R&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>rop <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">&quot;https://ropensci.org/packages/all/&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">http_type</span>(rop)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>rop_content <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(rop, <span class="st">&quot;text&quot;</span>)</span></code></pre></div>
</div>
<div id="dépôts-github" class="section level2">
<h2>Dépôts github</h2>
<p>L’objectif est de récupérer pour un utilisateur donné la liste de ses
dépots github (publics) puis de faire un tri sur ceux écrits en langage
R.</p>
<p>On utilise pour cela l’ API github permettant d’écrire des requêtes
web: <a href="https://docs.github.com/en/rest"
class="uri">https://docs.github.com/en/rest</a>.</p>
<p>Petit défaut, la requête web demande de connaitre l’identifiant
github moins pratique que l’adresse email plus standardisée.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recuperation des repositories (publics) github d&#39;un utilisateur</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ghrepos <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">&quot;https://api.github.com/users/andreamrau/repos&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># type de l&#39;objet récupéré: une liste json</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>httr<span class="sc">::</span><span class="fu">http_type</span>(ghrepos)</span></code></pre></div>
<pre><code>## [1] &quot;application/json&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># status de la requête (réussi ou pas)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>httr<span class="sc">::</span><span class="fu">http_status</span>(ghrepos)</span></code></pre></div>
<pre><code>## $category
## [1] &quot;Success&quot;
## 
## $reason
## [1] &quot;OK&quot;
## 
## $message
## [1] &quot;Success: (200) OK&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nombre de repos récupérés</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>lg_repo<span class="ot">&lt;-</span><span class="fu">length</span>(httr<span class="sc">::</span><span class="fu">content</span>(ghrepos))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>lg_repo</span></code></pre></div>
<pre><code>## [1] 28</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nom de chaque repo + langage utilisé</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,lg_repo)){</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(httr<span class="sc">::</span><span class="fu">content</span>(ghrepos)[[i]]<span class="sc">$</span>name)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(httr<span class="sc">::</span><span class="fu">content</span>(ghrepos)[[i]]<span class="sc">$</span>language)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;andrea&quot;
## [1] &quot;SCSS&quot;
## [1] &quot;andreamrau.github.io&quot;
## [1] &quot;HTML&quot;
## [1] &quot;bayesR&quot;
## NULL
## [1] &quot;BayesR_Simulations&quot;
## NULL
## [1] &quot;blogdown_source&quot;
## [1] &quot;HTML&quot;
## [1] &quot;clustree&quot;
## [1] &quot;R&quot;
## [1] &quot;COOLKIT&quot;
## NULL
## [1] &quot;coseq&quot;
## [1] &quot;R&quot;
## [1] &quot;CV&quot;
## [1] &quot;TeX&quot;
## [1] &quot;ebdbNet&quot;
## [1] &quot;C&quot;
## [1] &quot;EDGE-in-TCGA&quot;
## [1] &quot;R&quot;
## [1] &quot;FirebrowseR&quot;
## [1] &quot;R&quot;
## [1] &quot;GBNcausal&quot;
## [1] &quot;R&quot;
## [1] &quot;HTSCluster&quot;
## [1] &quot;R&quot;
## [1] &quot;HTSFilter&quot;
## [1] &quot;R&quot;
## [1] &quot;maskmeans&quot;
## [1] &quot;R&quot;
## [1] &quot;miscR&quot;
## [1] &quot;R&quot;
## [1] &quot;OpticRegen_2019&quot;
## [1] &quot;R&quot;
## [1] &quot;padma&quot;
## [1] &quot;R&quot;
## [1] &quot;RIFplus&quot;
## [1] &quot;Fortran&quot;
## [1] &quot;RMFRJLA_2019&quot;
## [1] &quot;R&quot;
## [1] &quot;rnaseq_tutorial&quot;
## [1] &quot;R&quot;
## [1] &quot;rosetta&quot;
## [1] &quot;R&quot;
## [1] &quot;rpkg-min&quot;
## [1] &quot;R&quot;
## [1] &quot;rpl&quot;
## [1] &quot;R&quot;
## [1] &quot;shinyGEO&quot;
## [1] &quot;CSS&quot;
## [1] &quot;tidyqtldb&quot;
## [1] &quot;R&quot;
## [1] &quot;tp-rgcca&quot;
## [1] &quot;TeX&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Possibilité de faire un tri sur les dépots contenant du R et de récupérer </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># la description et d&#39;autres informations</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple sur 1 depot contenant du R, recherche du fichier DESCRIPTION</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Si on trouve ce fichier dans un depot contenant du langage R, </span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># c&#39;est que c&#39;est un package (à automatiser)</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>onerepo<span class="ot">&lt;-</span>httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">&quot;https://api.github.com/repos/andreamrau/padma/contents/&quot;</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;DESCRIPTION&quot;</span>,httr<span class="sc">::</span><span class="fu">content</span>(onerepo))</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>A noter que Ropensci impose que les packages déposés chez eux, un
fois approuvés, aient un depot sur leur profil github. Il est donc
possible de parcourir, par une requête web, tous les fichiers
DESCRIPTION des depots github de Ropensci à la recherche des emails
utilisateurs:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Récupérer les noms des depots github de ropensci</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>ghrepos <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="st">&quot;https://api.github.com/users/ropensci/repos&quot;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># créer un vecteur contenant les noms de tous les depots</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>opname<span class="ot">&lt;-</span><span class="fu">list</span>()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="fu">length</span>(httr<span class="sc">::</span><span class="fu">content</span>(ghrepos)))){</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  opname[[i]]<span class="ot">&lt;-</span>httr<span class="sc">::</span><span class="fu">content</span>(ghrepos)[[i]]<span class="sc">$</span>name</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Rechercher un pattern dans chaque fichier DESCRIPTION</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># utiliser grep()</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># parcourir le vecteur des noms de depots </span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># + GET() sur le contenu des fichiers DESCRIPTION</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#test&lt;-GET(paste0(&quot;https://raw.githubusercontent.com/ropensci/&quot;,</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#                 opname[[3]],</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#                 &quot;/master/DESCRIPTION&quot;)</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>ldesc<span class="ot">&lt;-</span>purrr<span class="sc">::</span><span class="fu">map</span>(opname,<span class="cf">function</span>(x)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">content</span>(</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">GET</span>(<span class="fu">paste0</span>(<span class="st">&quot;https://raw.githubusercontent.com/ropensci/&quot;</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>                                x,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;/master/DESCRIPTION&quot;</span>))))  </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>emails_int <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;andrea.rau@inrae.fr&quot;</span>,</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;nathalie.vialaneix@inrae.fr&quot;</span>,</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;camille.piponiot@gmail.com&quot;</span>)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>resgrep <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span> (emails_int, <span class="cf">function</span>(x) <span class="fu">grep</span>(x, ldesc))</span></code></pre></div>
</div>
<div id="dépots-gitlab" class="section level2">
<h2>Dépots gitlab</h2>
<p>Avec l’instance gitlab de la forgemia, c’est un peu plus compliqué.
Il faudrait créer un token d’authentification pour pouvoir faire des
requêtes sur l’API gitlab.</p>
<p>La démarche est néanmoins la même: <a
href="https://docs.gitlab.com/ee/api/api_resources.html"
class="uri">https://docs.gitlab.com/ee/api/api_resources.html</a></p>
<p>Le préfixe des requêtes est
<code>https://forgemia.inra.fr/api/v4/</code>.</p>
</div>
</div>
<div id="références" class="section level1">
<h1>Références</h1>
<ul>
<li><a href="https://fr.wikipedia.org/wiki/Web_scraping"
class="uri">https://fr.wikipedia.org/wiki/Web_scraping</a></li>
<li><a href="https://www.tidytextmining.com/tidytext.html"
class="uri">https://www.tidytextmining.com/tidytext.html</a></li>
<li><a href="https://httr.r-lib.org/"
class="uri">https://httr.r-lib.org/</a></li>
<li><a href="https://jeroen.cran.dev/curl/"
class="uri">https://jeroen.cran.dev/curl/</a></li>
<li><a href="https://cran.r-project.org/web/packages/jsonlite/"
class="uri">https://cran.r-project.org/web/packages/jsonlite/</a></li>
<li><a href="https://docs.github.com/en/rest"
class="uri">https://docs.github.com/en/rest</a></li>
<li><a href="https://docs.gitlab.com/ee/api/api_resources.html"
class="uri">https://docs.gitlab.com/ee/api/api_resources.html</a></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
